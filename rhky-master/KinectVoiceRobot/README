一、文件介绍：
	1、当配置好了ubuntu运行环境后，在MainController文件夹下执行make可以编译出robot可执行文件；在Sound文件夹下可以make编译出可执行文件main；在Poweroff文件夹下执行make可编译出两个可执行文件client和server；
	其中MainController下的代码需要的环境比较复杂，需要配置kinect的开发环境；
	2、Alsa-Sound文件夹下的文件是保存的alsamixer配置文件，保存了音频输入和输出的参数配置，在每次启动机器时都会将该文件拷贝到/var/lib/alsa/目录下，并使用alsactl restore -f /var/lib/alsa/asound.state命令加载；目的是为了语音对话功能中能够正确的录音和放音；
	3、rhky_kinect.sh文件的功能是完成第二项拷贝音频配置文件并加载的功能和执行kinect的robot程序；并循环监视该程序是否在运行，若因一些原因导致改程序关闭rhky_kinect.sh文件就重新启动robot程序；
	4、rhky_poweroff.sh文件的功能是启动一个Socket服务器，监听来之robot程序的信息和管理员的关机命令；该文件在启动Socket服务器之前会先对一个文件的内容进行判断是0还是1，然后选择是启动监听服务还是执行poweroff命令；这样做的原因是主机通过网络远程被唤醒时关机命令会成为重启命令，重启完成后再执行关机命令才会正常关机；

二、使用方法：
	将rhky_poweroff.sh和rhky_kinect.sh文件添加到开机启动项即可；

三、执行流程：
	1、系统启动后通过rhky_poweroff.sh文件启动Poweroff文件夹下的server程序，server程序会先对config.txt文件内容进行检测是0还是1，判断是该执行关机命令还是继续执行，并对config.txt文件内容进行相应的改写，原来是0则改为1，原来为1则改为0；
	继续执行时会先向串口设备发送一条命令，改命令是让机器人处于立正的姿势；使用的原因是机器人一上电，舵机就会恢复到初始位置，导致机器人会出现一个比较怪异的姿势，所以启动后先发送一条使机器人立正的命令；
	启动Socket服务器后会监听两种信息，一个是poweroff，当接收到这个信息说明远程管理员发来了关机命令，这时使用system函数调用reboot命令；另一个是record，当接收到这个信息说明是robot程序发过来要求执行语音对话功能，此时则调用Sound文件夹下的main程序，由于音频程序用到了新版内核没有的/dev/dsp设备，所以执行时需要使用aoss命令，如：aoss ./main，这样就能够正常使用音频程序；

	2、在执行完rhky_poweroff.sh后，接着会执行rhky_kinect.sh文件运行robot程序；

四、运行过程：
	1、robot程序启动后，会通过kinect得到视野内用户的骨骼坐标，并利用坐标画出人体的骨骼线；但是我们需要的是通过坐标不断的向串口发送命令来控制机器人的手臂执行动作；
	首先我们获得了kinect识别到的骨骼点的三维空间的坐标x、y、z，然后利用坐标计算用户肢体间或肢体和身体再或者与X、Y、Z轴的角度；并找出每个舵机对应哪个角；
	得到角度后，利用角度的上下限和舵机的可移动范围限值计算出一个积的常数和一个和的常数，得到一个根据角度击计算PWM值的公式，在程序运行过程并且kinect视野内有人的情况下，程序不断得到用户骨骼点的三维坐标，计算出角度，再通过角度计算出PWM值，通过串口发送出去，舵机控制板接收到串口命令后转成PWM波控制舵机做出相应的转动；
	在控制过程中，系统会检测用户的转身、离开等动作，当用户转身或者离开指定的范围，程序发送立正姿势的命令；当用户做出双手交叉的动作时，程序给本机的Socket服务器发送一条record信息，通过server程序启动语音对话的程序；

五、硬件方面：
	机器人身上有六个舵机，两个控制两个手臂的前后动作，两个控制手臂的左右动作，两个控制胳膊肘的弯或直；
	根据每个舵机控制的位置，为了防止手臂在被控制时不会碰到自己的身体而造成损坏，在robot程序中设定命令值时会根据事先测试好的安全范围数值对某些命令范围的大小做限制；例如不能在立正状态下做出弯曲胳膊肘的动作；
	舵机控制板的作用是接收串口命令，转化为PWM波控制舵机用的，一个控制板可以控制16或者32个舵机，我们在连接时采用的是隔一个位置连接一个舵机，目的是防止出现干扰；
	串口设备有两个，一个是用来控制机器人电源的，连接PC和继电器，当server启动后会向该串口发送一个命令使继电器耦合，机器人内部插座上电，server接收到poweroff命令后，就会向该继电器发送一个断开继电器的命令进行断电；另一个串口设备是将串口信息传递给舵机控制板，用来控制控制舵机的转动；

六、主机接线：
	连接继电器的串口设备接在左下角蓝色USB接口；
	连接音箱、kinect设备、舵机控制串口设备的线接在黑色USB接口；
	音频线、麦克风线分别接入绿色和红色音频接口；
	网线接在DVI显示接口旁的网线接口（不能接另一个，管理员会通过该网卡的mac地址远程开关机）；

七、系统配置：
	1、系统：ubuntu-12.04.3-desktop.i386；
	2、kinect开发环境，编译和执行robot程序；
	3、alsa-oss包，执行音频程序main需要；
	4、网络配置：固定IP：192.168.3.130；网关：192.168.3.1；DNS：需要找管理员查询；